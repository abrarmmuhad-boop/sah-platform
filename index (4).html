<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© ØµÙØ­Ù‘ - SAH Platform</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #00f5a0;
            --secondary: #00d9f5;
            --purple: #a960ee;
            --bg-dark: #0a0e27;
            --bg-card: rgba(255, 255, 255, 0.05);
            --text: #ffffff;
            --text-dim: rgba(255, 255, 255, 0.7);
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Tajawal', 'Cairo', sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.7;
            overflow-x: hidden;
        }

        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .gradient-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.3;
            animation: float 20s ease-in-out infinite;
        }

        .orb-1 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, var(--secondary), transparent);
            top: -200px;
            right: -200px;
        }

        .orb-2 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, var(--primary), transparent);
            bottom: -150px;
            left: -150px;
            animation-delay: -7s;
        }

        .orb-3 {
            width: 350px;
            height: 350px;
            background: radial-gradient(circle, var(--purple), transparent);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation-delay: -14s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(30px, -30px) scale(1.1); }
        }

        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence baseFrequency='0.9' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
            opacity: 0.05;
            z-index: 1;
            pointer-events: none;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 2;
        }

        .hero-header {
            text-align: center;
            padding: 3rem 0;
            margin-bottom: 3rem;
            animation: fadeUp 0.8s ease;
        }

        .logo-container {
            position: relative;
            display: inline-block;
            margin-bottom: 2rem;
        }

        .logo-image {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            border: 3px solid rgba(0, 245, 160, 0.4);
            box-shadow: 0 0 50px rgba(0, 245, 160, 0.5);
            animation: logoFloat 3s ease-in-out infinite;
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .logo-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 160px;
            height: 160px;
            background: radial-gradient(circle, var(--primary), transparent);
            border-radius: 50%;
            filter: blur(30px);
            opacity: 0.6;
            z-index: -1;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 0.8; }
        }

        .hero-title {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .title-line {
            font-size: 1.5rem;
            font-weight: 300;
            color: var(--text-dim);
            letter-spacing: 2px;
        }

        .title-main {
            font-size: clamp(4rem, 10vw, 7rem);
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            filter: drop-shadow(0 0 30px rgba(0, 245, 160, 0.3));
        }

        .title-subtitle {
            font-size: 1.2rem;
            color: var(--secondary);
            letter-spacing: 3px;
            font-weight: 400;
        }

        .hero-tagline {
            font-size: 1.3rem;
            color: var(--text-dim);
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
        }

        .tagline-icon {
            animation: sparkle 1.5s ease-in-out infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            padding: 1.5rem;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 600px;
            margin: 0 auto;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-top: 0.3rem;
        }

        .stat-divider {
            width: 1px;
            height: 40px;
            background: linear-gradient(to bottom, transparent, rgba(255,255,255,0.2), transparent);
        }

        .nav-pills {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 3rem;
            padding: 0.8rem;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: 50px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeUp 0.8s ease 0.2s both;
        }

        .nav-pill {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.8rem 1.5rem;
            border: none;
            background: transparent;
            color: var(--text-dim);
            font-size: 1rem;
            font-weight: 600;
            font-family: inherit;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-pill:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text);
        }

        .nav-pill.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--bg-dark);
            box-shadow: 0 0 30px rgba(0, 245, 160, 0.4);
        }

        .pill-icon {
            font-size: 1.3rem;
        }

        .section-container {
            display: none;
            animation: fadeUp 0.6s ease;
        }

        .section-container.active {
            display: block;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .back-btn {
            padding: 0.8rem 1.5rem;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text);
            font-size: 1rem;
            font-weight: 600;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .section-title-wrap {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .section-icon {
            font-size: 2.5rem;
            filter: drop-shadow(0 0 20px rgba(0, 245, 160, 0.5));
        }

        .section-title {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .feature-card {
            position: relative;
            padding: 2.5rem;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            animation: fadeUp 0.8s ease;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .feature-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), 0 0 40px rgba(0, 245, 160, 0.3);
            border-color: rgba(0, 245, 160, 0.3);
        }

        .feature-card:hover::before {
            opacity: 0.05;
        }

        .card-purple:hover {
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), 0 0 40px rgba(169, 96, 238, 0.3);
        }

        .card-glow {
            position: absolute;
            top: 10%;
            right: 10%;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, var(--primary), transparent);
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .feature-card:hover .card-glow {
            opacity: 0.4;
        }

        .card-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            filter: drop-shadow(0 10px 20px rgba(0, 245, 160, 0.3));
            animation: iconFloat 2s ease-in-out infinite;
        }

        @keyframes iconFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .card-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .card-description {
            font-size: 1.05rem;
            color: var(--text-dim);
            line-height: 1.7;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 1;
        }

        .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 1;
        }

        .tag {
            padding: 0.4rem 0.9rem;
            background: rgba(0, 245, 160, 0.1);
            border: 1px solid rgba(0, 245, 160, 0.3);
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--primary);
        }

        .card-button {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 12px;
            color: var(--bg-dark);
            font-size: 1.1rem;
            font-weight: 700;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
        }

        .card-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 245, 160, 0.4);
        }

        .info-box {
            display: flex;
            gap: 1.5rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(0, 217, 245, 0.1), rgba(0, 245, 160, 0.1));
            border: 1px solid rgba(0, 217, 245, 0.3);
            border-radius: 16px;
            margin-bottom: 1.5rem;
            animation: fadeUp 0.8s ease 0.4s both;
        }

        .info-icon {
            font-size: 2.5rem;
            flex-shrink: 0;
        }

        .info-content h3 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--secondary);
        }

        .info-content p {
            color: var(--text-dim);
            line-height: 1.7;
        }

        .warning-box {
            display: flex;
            gap: 1.5rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(254, 202, 87, 0.1));
            border: 1px solid rgba(255, 107, 107, 0.3);
            border-radius: 16px;
            margin-bottom: 1.5rem;
            animation: fadeUp 0.8s ease 0.6s both;
        }

        .warning-icon {
            font-size: 1.8rem;
            flex-shrink: 0;
        }

        .warning-content h3 {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #feca57;
        }

        .warning-content p {
            color: var(--text-dim);
            line-height: 1.7;
        }

        .tip-box {
            display: flex;
            gap: 1.5rem;
            padding: 1.5rem;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            margin-bottom: 2rem;
        }

        .tip-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }

        .tip-box h4 {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .tip-box p {
            color: var(--text-dim);
            line-height: 1.7;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 0.8rem;
            font-weight: 600;
        }

        .badge {
            padding: 0.25rem 0.7rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
        }

        .badge.required {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--bg-dark);
        }

        .badge.optional {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-dim);
        }

        .value-badge {
            padding: 0.3rem 0.9rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 800;
            color: var(--bg-dark);
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 1rem;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text);
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 245, 160, 0.1), 0 0 20px rgba(0, 245, 160, 0.2);
            background: rgba(255, 255, 255, 0.08);
        }

        .form-input::placeholder,
        .form-textarea::placeholder {
            color: var(--text-dim);
        }

        .form-slider {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            border-radius: 3px;
            -webkit-appearance: none;
            cursor: pointer;
        }

        .form-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(0, 245, 160, 0.5);
            transition: all 0.3s ease;
        }

        .form-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 30px rgba(0, 245, 160, 0.7);
        }

        .form-slider::-moz-range-thumb {
            width: 22px;
            height: 22px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(0, 245, 160, 0.5);
            transition: all 0.3s ease;
        }

        .form-slider::-moz-range-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 30px rgba(0, 245, 160, 0.7);
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            cursor: pointer;
            padding: 0.8rem;
            border-radius: 12px;
            transition: background 0.3s ease;
        }

        .checkbox-label:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .checkbox-label input[type="checkbox"] {
            display: none;
        }

        .checkbox-box {
            width: 22px;
            height: 22px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .checkbox-label input[type="checkbox"]:checked + .checkbox-box {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-color: transparent;
        }

        .checkbox-label input[type="checkbox"]:checked + .checkbox-box::after {
            content: 'âœ“';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--bg-dark);
            font-weight: 900;
            font-size: 13px;
        }

        .chip-input {
            display: flex;
            gap: 0.8rem;
        }

        .chip-btn {
            padding: 1rem 1.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 12px;
            color: var(--bg-dark);
            font-size: 0.95rem;
            font-weight: 700;
            font-family: inherit;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        .chip-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 245, 160, 0.3);
        }

        .chips {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-top: 1rem;
        }

        .chip {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1rem;
            background: rgba(0, 245, 160, 0.1);
            border: 1px solid rgba(0, 245, 160, 0.3);
            border-radius: 20px;
            font-weight: 600;
            color: var(--primary);
            animation: chipIn 0.3s ease;
        }

        @keyframes chipIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .chip button {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease;
        }

        .chip button:hover {
            transform: scale(1.3);
        }

        .primary-btn {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            width: 100%;
            padding: 1.2rem;
            border: none;
            border-radius: 16px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--bg-dark);
            font-size: 1.2rem;
            font-weight: 800;
            font-family: inherit;
            cursor: pointer;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 40px rgba(0, 245, 160, 0.3);
        }

        .primary-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 60px rgba(0, 245, 160, 0.5);
        }

        .primary-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-icon {
            font-size: 1.5rem;
        }

        .status-msg {
            padding: 1rem;
            margin: 1.5rem 0;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text-dim);
            font-weight: 600;
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 0.8rem;
        }

        .status-msg.error {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(254, 202, 87, 0.1));
            border-color: rgba(255, 107, 107, 0.3);
            color: #ff6b6b;
        }

        .status-msg.success {
            background: linear-gradient(135deg, rgba(17, 153, 142, 0.1), rgba(56, 239, 125, 0.1));
            border-color: rgba(0, 245, 160, 0.3);
            color: var(--primary);
        }

        .error-details {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: 0.5rem;
        }

        .retry-btn {
            padding: 0.6rem 1.2rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: var(--text);
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 0.5rem;
        }

        .retry-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .result-box {
            margin-top: 2rem;
            padding: 2rem;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            animation: slideUp 0.6s ease;
        }

        .result-box.hidden {
            display: none;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-bottom: 2rem;
        }

        .result-badge {
            padding: 0.8rem 1.5rem;
            border-radius: 30px;
            font-weight: 800;
            font-size: 1rem;
            animation: badgeIn 0.5s ease;
        }

        @keyframes badgeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .result-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 16px;
            border-right: 4px solid var(--primary);
        }

        .result-section.highlight {
            background: linear-gradient(135deg, rgba(0, 245, 160, 0.1), rgba(0, 217, 245, 0.1));
            border-right-color: var(--secondary);
        }

        .result-section h3 {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .result-section h3 span {
            font-size: 1.8rem;
        }

        .result-section p {
            color: var(--text-dim);
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .big-text {
            font-size: 1.3rem !important;
            font-weight: 700 !important;
            color: var(--text) !important;
        }

        .plan-grid,
        .trigger-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .dayCard,
        .trCard {
            padding: 1.5rem;
            background: rgba(0, 245, 160, 0.05);
            border: 1px solid rgba(0, 245, 160, 0.2);
            border-radius: 16px;
            transition: all 0.3s ease;
            animation: cardIn 0.5s ease;
        }

        @keyframes cardIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dayCard:hover,
        .trCard:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 245, 160, 0.2);
        }

        .dayCard h4 {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--primary);
        }

        .dayCard ul {
            margin: 0.8rem 0;
            padding-right: 1.5rem;
            color: var(--text-dim);
        }

        .dayCard li {
            margin: 0.5rem 0;
            line-height: 1.6;
        }

        .dayCard .tip {
            margin-top: 1rem;
            padding: 0.8rem;
            background: rgba(0, 245, 160, 0.1);
            border-right: 3px solid var(--primary);
            border-radius: 4px;
        }

        .trCard p {
            margin: 0.8rem 0;
            line-height: 1.7;
            color: var(--text-dim);
        }

        .trCard strong {
            color: var(--text);
        }

        .json-details {
            margin-top: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
        }

        .json-details summary {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
            font-weight: 600;
            color: var(--text-dim);
            transition: all 0.3s ease;
        }

        .json-details summary:hover {
            background: rgba(255, 255, 255, 0.08);
            color: var(--text);
        }

        .json-details pre {
            padding: 1.5rem;
            background: rgba(0, 0, 0, 0.3);
            color: var(--primary);
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .modal-backdrop {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .modal-content {
            position: relative;
            max-width: 500px;
            width: 90%;
            background: var(--bg-dark);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: modalIn 0.4s ease;
        }

        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .modal-icon {
            font-size: 2.5rem;
        }

        .modal-header h2 {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modal-content p {
            color: var(--text-dim);
            line-height: 1.7;
            margin-bottom: 1rem;
        }

        .modal-hint {
            font-size: 0.9rem;
            color: var(--text-dim);
            margin-top: 1rem;
        }

        .modal-hint a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        .modal-hint a:hover {
            text-decoration: underline;
        }

        .footer {
            margin-top: 3rem;
            padding: 2rem 0;
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer p {
            color: var(--text-dim);
            margin: 0.5rem 0;
        }

        .footer-small {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.5);
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .hero-stats {
                flex-direction: column;
                gap: 1rem;
            }

            .stat-divider {
                width: 60%;
                height: 1px;
            }

            .nav-pills {
                flex-direction: column;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .grid-2 {
                grid-template-columns: 1fr;
            }

            .section-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .checkbox-grid {
                grid-template-columns: 1fr;
            }

            .chip-input {
                flex-direction: column;
            }

            .plan-grid,
            .trigger-grid {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="bg-animation">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>
    <div class="noise-overlay"></div>

    <main class="container">
        <header class="hero-header">
            <div class="logo-container">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2300f5a0'/%3E%3Cstop offset='100%25' style='stop-color:%2300d9f5'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='100' cy='100' r='90' fill='url(%23g)'/%3E%3Ctext x='100' y='130' font-size='100' font-weight='900' text-anchor='middle' fill='%23fff'%3EØµÙ%3C/text%3E%3C/svg%3E" alt="Ø´Ø¹Ø§Ø± ØµØ­" class="logo-image">
                <div class="logo-glow"></div>
            </div>
            <div class="hero-content">
                <h1 class="hero-title">
                    <span class="title-line">Ù…Ù†ØµØ©</span>
                    <span class="title-main">ØµÙØ­Ù‘</span>
                    <span class="title-subtitle">SAH PLATFORM</span>
                </h1>
                <p class="hero-tagline">
                    <span class="tagline-icon">âœ¨</span>
                    Ø§Ù„ØªÙˆØ¹ÙŠØ© Ø§Ù„ØµØ­ÙŠØ© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
                    <span class="tagline-icon">âœ¨</span>
                </p>
                <div class="hero-stats">
                    <div class="stat-item">
                        <div class="stat-number">2</div>
                        <div class="stat-label">Ø®Ø¯Ù…Ø§Øª Ø°ÙƒÙŠØ©</div>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <div class="stat-number">AI</div>
                        <div class="stat-label">Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ù€ Gemini</div>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <div class="stat-number">24/7</div>
                        <div class="stat-label">Ù…ØªØ§Ø­ Ø¯Ø§Ø¦Ù…Ø§Ù‹</div>
                    </div>
                </div>
            </div>
        </header>

        <nav class="nav-pills">
            <button class="nav-pill active" onclick="showSection('homeSection')">
                <span class="pill-icon">ğŸ </span>
                <span class="pill-text">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
            </button>
            <button class="nav-pill" onclick="showSection('rumorSection')">
                <span class="pill-icon">ğŸ§ </span>
                <span class="pill-text">ÙƒØ§Ø´Ù Ø§Ù„Ø´Ø§Ø¦Ø¹Ø§Øª</span>
            </button>
            <button class="nav-pill" onclick="showSection('coSection')">
                <span class="pill-icon">ğŸ’¨</span>
                <span class="pill-text">Ø®Ø·Ø© Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹</span>
            </button>
        </nav>

        <section id="homeSection" class="section-container active">
            <div class="features-grid">
                <div class="feature-card card-purple" onclick="showSection('rumorSection')">
                    <div class="card-glow"></div>
                    <div class="card-icon">ğŸ§ </div>
                    <h2 class="card-title">ÙƒØ§Ø´Ù Ø§Ù„Ø´Ø§Ø¦Ø¹Ø§Øª</h2>
                    <p class="card-description">
                        ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø£ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø© ØµØ­ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
                    </p>
                    <div class="card-tags">
                        <span class="tag">ØªØ­Ù„ÙŠÙ„ ÙÙˆØ±ÙŠ</span>
                        <span class="tag">Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©</span>
                        <span class="tag">Ù…ØµØ§Ø¯Ø± Ù…ÙˆØ«ÙˆÙ‚Ø©</span>
                    </div>
                    <button class="card-button">Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙØ­Øµ â†</button>
                </div>

                <div class="feature-card card-green" onclick="showSection('coSection')">
                    <div class="card-glow"></div>
                    <div class="card-icon">ğŸ’¨</div>
                    <h2 class="card-title">Ø®Ø·Ø© Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹ Ø¹Ù† Ø§Ù„ØªØ¯Ø®ÙŠÙ†</h2>
                    <p class="card-description">
                        Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø®Ø·Ø© Ø´Ø®ØµÙŠØ© ÙˆÙ…ØªØ¯Ø±Ø¬Ø© Ù„Ù„Ø¥Ù‚Ù„Ø§Ø¹ Ø¹Ù† Ø§Ù„ØªØ¯Ø®ÙŠÙ† Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø­Ø§Ù„ØªÙƒ
                    </p>
                    <div class="card-tags">
                        <span class="tag">Ø®Ø·Ø© Ù…Ø®ØµØµØ©</span>
                        <span class="tag">Ù…ØªØ§Ø¨Ø¹Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©</span>
                        <span class="tag">Ù†ØµØ§Ø¦Ø­ Ø¹Ù…Ù„ÙŠØ©</span>
                    </div>
                    <button class="card-button">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù† â†</button>
                </div>
            </div>

            <div class="info-box">
                <div class="info-icon">â„¹ï¸</div>
                <div class="info-content">
                    <h3>Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„Ù…Ù†ØµØ©</h3>
                    <p>Ù…Ù†ØµØ© ØµÙØ­Ù‘ Ù‡ÙŠ Ø£Ø¯Ø§Ø© ØªÙˆØ¹ÙŠØ© ØµØ­ÙŠØ© Ù…Ø¯Ø¹ÙˆÙ…Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ. Ù†Ø³ØªØ®Ø¯Ù… ØªÙ‚Ù†ÙŠØ§Øª Gemini Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØµØ­ÙŠØ© Ø¯Ù‚ÙŠÙ‚Ø© ÙˆÙ…ÙˆØ«ÙˆÙ‚Ø©.</p>
                </div>
            </div>

            <div class="warning-box">
                <div class="warning-icon">âš ï¸</div>
                <div class="warning-content">
                    <h3>ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù‡Ù…</h3>
                    <p>Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†ØµØ© Ù„Ù„ØªÙˆØ¹ÙŠØ© Ø§Ù„ØµØ­ÙŠØ© ÙÙ‚Ø· ÙˆÙ„ÙŠØ³Øª Ø¨Ø¯ÙŠÙ„Ø§Ù‹ Ø¹Ù† Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ø·Ø¨ÙŠØ© Ø§Ù„Ù…ØªØ®ØµØµØ©. ÙÙŠ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ØŒ ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨ ÙÙˆØ±Ø§Ù‹.</p>
                </div>
            </div>
        </section>

        <section id="rumorSection" class="section-container">
            <div class="section-header">
                <button class="back-btn" onclick="showSection('homeSection')">â† Ø±Ø¬ÙˆØ¹</button>
                <div class="section-title-wrap">
                    <span class="section-icon">ğŸ§ </span>
                    <h2 class="section-title">ÙƒØ§Ø´Ù Ø§Ù„Ø´Ø§Ø¦Ø¹Ø§Øª Ø§Ù„ØµØ­ÙŠØ©</h2>
                </div>
            </div>

            <div class="tip-box">
                <span class="tip-icon">ğŸ’¡</span>
                <div>
                    <h4>ÙƒÙŠÙ ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø¯Ø§Ø©ØŸ</h4>
                    <p>Ø§ÙƒØªØ¨ Ø£Ùˆ Ø§Ù„ØµÙ‚ Ø£ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø© ØµØ­ÙŠØ© ØªØ±ÙŠØ¯ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù†Ù‡Ø§ØŒ ÙˆØ³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨ØªØ­Ù„ÙŠÙ„Ù‡Ø§.</p>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© Ø£Ùˆ Ø§Ù„Ø¥Ø´Ø§Ø¹Ø© Ø§Ù„ØµØ­ÙŠØ©</span>
                    <span class="badge required">Ù…Ø·Ù„ÙˆØ¨</span>
                </label>
                <textarea id="rumorText" class="form-textarea" rows="6" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ø²Ù†Ø¬Ø¨ÙŠÙ„ ÙŠØ¹Ø§Ù„Ø¬ Ø§Ù„Ø³Ø±Ø·Ø§Ù† Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹..."></textarea>
            </div>

            <button class="primary-btn" onclick="checkRumor()">
                <span class="btn-icon">ğŸ”</span>
                <span>ÙØ­Øµ Ø§Ù„Ø¥Ø´Ø§Ø¹Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</span>
            </button>

            <div id="rumorStatus" class="status-msg"></div>

            <div id="rumorResultBox" class="result-box hidden">
                <div class="result-badges">
                    <div id="rumorVerdict" class="result-badge"></div>
                    <div id="rumorRisk" class="result-badge"></div>
                </div>

                <div class="result-section">
                    <h3><span>ğŸ“Š</span> Ø§Ù„ØªÙØ³ÙŠØ±</h3>
                    <p id="rumorExplanation"></p>
                </div>

                <div class="result-section">
                    <h3><span>âœ…</span> Ø§Ù„ØªØµØ­ÙŠØ­</h3>
                    <p id="rumorCorrection"></p>
                </div>

                <div class="result-section">
                    <h3><span>ğŸ’¡</span> Ù†ØµÙŠØ­Ø© Ø¢Ù…Ù†Ø©</h3>
                    <p id="rumorAdvice"></p>
                </div>

                <details class="json-details">
                    <summary>Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø© (JSON)</summary>
                    <pre id="rumorRaw"></pre>
                </details>
            </div>
        </section>

        <section id="coSection" class="section-container">
            <div class="section-header">
                <button class="back-btn" onclick="showSection('homeSection')">â† Ø±Ø¬ÙˆØ¹</button>
                <div class="section-title-wrap">
                    <span class="section-icon">ğŸ’¨</span>
                    <h2 class="section-title">Ø®Ø·Ø© Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹ Ø¹Ù† Ø§Ù„ØªØ¯Ø®ÙŠÙ†</h2>
                </div>
            </div>

            <div class="tip-box">
                <span class="tip-icon">ğŸ’¡</span>
                <div>
                    <h4>ÙƒÙŠÙ ØªØ¹Ù…Ù„ Ø§Ù„Ø£Ø¯Ø§Ø©ØŸ</h4>
                    <p>Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØ¹Ø§Ø¯Ø§Øª Ø§Ù„ØªØ¯Ø®ÙŠÙ†ØŒ ÙˆØ³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø© Ù…Ø®ØµØµØ© Ù„Ùƒ.</p>
                </div>
            </div>

            <div class="grid-2">
                <div class="form-group">
                    <label class="form-label">
                        <span>Ø§Ù„Ø¹Ù…Ø±</span>
                        <span class="badge required">Ù…Ø·Ù„ÙˆØ¨</span>
                    </label>
                    <input type="number" id="age" class="form-input" min="10" max="90" value="25" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù…Ø±Ùƒ">
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <span>Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø¬Ø§Ø¦Ø± ÙŠÙˆÙ…ÙŠØ§Ù‹</span>
                        <span class="badge required">Ù…Ø·Ù„ÙˆØ¨</span>
                    </label>
                    <input type="number" id="cigs" class="form-input" min="0" max="60" value="10" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø¬Ø§Ø¦Ø±">
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <span>Ø³Ù†ÙˆØ§Øª Ø§Ù„ØªØ¯Ø®ÙŠÙ†</span>
                        <span class="badge required">Ù…Ø·Ù„ÙˆØ¨</span>
                    </label>
                    <input type="number" id="years" class="form-input" min="0" max="70" value="5" placeholder="ÙƒÙ… Ø³Ù†Ø©">
                </div>

                <div class="form-group full-width">
                    <label class="form-label">
                        <span>Ù†Ø³Ø¨Ø© Ø£ÙˆÙ„ Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ† (CO)</span>
                        <span class="value-badge" id="coVal">15</span>
                        <span>ppm</span>
                    </label>
                    <input type="range" id="co" class="form-slider" min="0" max="50" value="15">
                </div>

                <div class="form-group full-width">
                    <label class="form-label">
                        <span>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø§ÙØ² Ù„Ù„Ø¥Ù‚Ù„Ø§Ø¹</span>
                        <span class="value-badge" id="motVal">7</span>
                        <span>/ 10</span>
                    </label>
                    <input type="range" id="motivation" class="form-slider" min="1" max="10" value="7">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Ù…ØªÙ‰ ØªØ¯Ø®Ù† Ø¹Ø§Ø¯Ø©ØŸ</span>
                    <span class="badge optional">Ø§Ø®ØªÙŠØ§Ø±ÙŠ</span>
                </label>
                <div class="checkbox-grid">
                    <label class="checkbox-label">
                        <input type="checkbox" name="tr" value="morning coffee" checked>
                        <span class="checkbox-box"></span>
                        <span>Ù‚Ù‡ÙˆØ© Ø§Ù„ØµØ¨Ø§Ø­</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="tr" value="work stress" checked>
                        <span class="checkbox-box"></span>
                        <span>Ø¶ØºØ· Ø§Ù„Ø¹Ù…Ù„</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="tr" value="after meals">
                        <span class="checkbox-box"></span>
                        <span>Ø¨Ø¹Ø¯ Ø§Ù„Ø£ÙƒÙ„</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="tr" value="friends">
                        <span class="checkbox-box"></span>
                        <span>Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</span>
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ø§Ù„ØªÙŠ ØªØ¹Ø§Ù†ÙŠ Ù…Ù†Ù‡Ø§</span>
                    <span class="badge optional">Ø§Ø®ØªÙŠØ§Ø±ÙŠ</span>
                </label>
                <textarea id="symptoms" class="form-textarea" rows="3" placeholder="Ù…Ø«Ø§Ù„: ØµØ¯Ø§Ø¹ØŒ ÙƒØ­Ø©ØŒ Ø¶ÙŠÙ‚ Ù†ÙØ³..."></textarea>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Ø¹ÙˆØ§Ù…Ù„ Ø¥Ø¶Ø§ÙÙŠØ©</span>
                    <span class="badge optional">Ø§Ø®ØªÙŠØ§Ø±ÙŠ</span>
                </label>
                <div class="chip-input">
                    <input type="text" id="factorInput" class="form-input" placeholder="Ø§ÙƒØªØ¨ Ø¹Ø§Ù…Ù„ ÙˆØ§Ø¶ØºØ· Ø¥Ø¶Ø§ÙØ©">
                    <button class="chip-btn" onclick="addFactor()">+ Ø¥Ø¶Ø§ÙØ©</button>
                </div>
                <div id="factorChips" class="chips"></div>
            </div>

            <button class="primary-btn" onclick="analyzeCO()">
                <span class="btn-icon">ğŸš€</span>
                <span>Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·ØªÙŠ Ù„Ù„Ø¥Ù‚Ù„Ø§Ø¹</span>
            </button>

            <div id="coStatus" class="status-msg"></div>

            <div id="coResultBox" class="result-box hidden">
                <div class="result-badges">
                    <div id="coRiskBadge" class="result-badge"></div>
                    <div id="coVerdictBadge" class="result-badge"></div>
                </div>

                <div class="result-section">
                    <h3><span>ğŸ“‹</span> Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø§Ù„Ø©</h3>
                    <p id="coSummary"></p>
                </div>

                <div class="result-section">
                    <h3><span>ğŸ”</span> ØªØ­Ù„ÙŠÙ„ Ø´Ø®ØµÙŠ</h3>
                    <p id="coInsight"></p>
                </div>

                <div class="result-section highlight">
                    <h3><span>ğŸ“…</span> Ù…Ø¯Ø© Ø§Ù„Ø®Ø·Ø©</h3>
                    <p id="coStrategy" class="big-text"></p>
                </div>

                <div class="result-section">
                    <h3><span>ğŸ“Š</span> Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©</h3>
                    <div id="coPlanGrid" class="plan-grid"></div>
                </div>

                <div class="result-section">
                    <h3><span>ğŸ¯</span> Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ù…Ø­ÙØ²Ø§Øª</h3>
                    <div id="coTriggerGrid" class="trigger-grid"></div>
                </div>

                <details class="json-details">
                    <summary>Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø© (JSON)</summary>
                    <pre id="coRaw"></pre>
                </details>

                <div class="warning-box">
                    <div class="warning-icon">âš ï¸</div>
                    <div class="warning-content">
                        <h3>ØªÙ†Ø¨ÙŠÙ‡ ØµØ­ÙŠ</h3>
                        <p>Ø¥Ø°Ø§ Ø´Ø¹Ø±Øª Ø¨Ø£Ù„Ù… ÙÙŠ Ø§Ù„ØµØ¯Ø± Ø£Ùˆ Ø¶ÙŠÙ‚ ØªÙ†ÙØ³ Ø´Ø¯ÙŠØ¯ØŒ Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙÙˆØ±Ø§Ù‹. Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·Ø© Ù„Ù„ØªÙˆØ¹ÙŠØ© ÙÙ‚Ø·.</p>
                    </div>
                </div>
            </div>
        </section>

        <footer class="footer">
            <p>Ù…Ù†ØµØ© ØµÙØ­Ù‘ (SAH) â€¢ Ù…Ø´Ø±ÙˆØ¹ ØªÙˆØ¹ÙŠØ© ØµØ­ÙŠØ© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p>
            <p class="footer-small">Powered by Gemini AI â€¢ 2025</p>
        </footer>
    </main>

    <div id="apiModal" class="modal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-icon">âš™ï¸</span>
                <h2>Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</h2>
            </div>
            <p>Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©ØŒ Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ Gemini API:</p>
            <div class="form-group">
                <input type="text" id="apiKeyInput" class="form-input" placeholder="AIzaSy... Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…ÙØªØ§Ø­ Ù‡Ù†Ø§">
            </div>
            <p class="modal-hint">
                Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ Ù…Ø¬Ø§Ù†ÙŠ Ù…Ù† 
                <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio â†—</a>
                <br><small style="color: #feca57; margin-top: 0.5rem; display: block;">âš ï¸ ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙØªØ§Ø­ Ø¬Ø¯ÙŠØ¯ Ø®Ø§Øµ Ø¨Ùƒ</small>
            </p>
            <button class="primary-btn" onclick="saveApiKey()" style="margin-bottom: 0.8rem;">
                ğŸ’¾ Ø­ÙØ¸ ÙˆØªÙØ¹ÙŠÙ„
            </button>
            <button class="primary-btn" onclick="resetApiKey()" style="background: linear-gradient(135deg, #ff6b6b, #feca57);">
                ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù‚Ø¯ÙŠÙ…
            </button>
        </div>
    </div>

    <script>
        let GEMINI_API_KEY = localStorage.getItem('gemini_api_key') || null;
        let extraFactors = [];
        let chosenModelName = null;

        function $(id) { return document.getElementById(id); }

        function escapeHtml(str) {
            return String(str ?? "")
                .replaceAll("&", "&amp;")
                .replaceAll("<", "&lt;")
                .replaceAll(">", "&gt;")
                .replaceAll('"', "&quot;")
                .replaceAll("'", "&#039;");
        }

        function safeParseJSON(text) {
            const s = text.indexOf("{");
            const e = text.lastIndexOf("}");
            if (s === -1 || e === -1) {
                throw new Error("Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù… ÙŠØ±Ø¬Ø¹ JSON ØµØ­ÙŠØ­");
            }
            return JSON.parse(text.slice(s, e + 1));
        }

        function checkApiKey() {
            if (!GEMINI_API_KEY) {
                $("apiModal").style.display = "flex";
                return false;
            }
            return true;
        }

        function saveApiKey() {
            const key = $("apiKeyInput").value.trim();
            if (!key) {
                alert("âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ API");
                return;
            }
            
            if (!key.startsWith('AIzaSy')) {
                alert("âš ï¸ Ø§Ù„Ù…ÙØªØ§Ø­ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ AIzaSy\nØªØ£ÙƒØ¯ Ù…Ù† Ù†Ø³Ø® Ø§Ù„Ù…ÙØªØ§Ø­ ÙƒØ§Ù…Ù„Ø§Ù‹");
                return;
            }
            
            GEMINI_API_KEY = key;
            localStorage.setItem('gemini_api_key', key);
            $("apiModal").style.display = "none";
            alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ Ø¨Ù†Ø¬Ø§Ø­!\nØ¬Ø±Ø¨ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø¢Ù†");
        }

        function resetApiKey() {
            if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ø­ÙÙˆØ¸ØŸ")) {
                localStorage.removeItem('gemini_api_key');
                GEMINI_API_KEY = null;
                chosenModelName = null;
                $("apiKeyInput").value = "";
                alert("âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù‚Ø¯ÙŠÙ…!\nØ§Ù„Ø¢Ù† Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Google AI Studio");
            }
        }

        window.saveApiKey = saveApiKey;
        window.resetApiKey = resetApiKey;

        function showSection(sectionId) {
            ["homeSection", "coSection", "rumorSection"].forEach(id => {
                $(id).classList.remove("active");
            });
            
            $(sectionId).classList.add("active");
            
            const pills = document.querySelectorAll('.nav-pill');
            pills.forEach(pill => pill.classList.remove('active'));
            
            if (sectionId === "homeSection") {
                pills[0].classList.add("active");
            } else if (sectionId === "rumorSection") {
                pills[1].classList.add("active");
                $("rumorStatus").textContent = "";
                $("rumorStatus").className = "status-msg";
            } else if (sectionId === "coSection") {
                pills[2].classList.add("active");
                $("coStatus").textContent = "";
                $("coStatus").className = "status-msg";
            }
            
            window.scrollTo(0, 0);
        }

        window.showSection = showSection;

        $("co").addEventListener("input", () => {
            $("coVal").textContent = $("co").value;
        });

        $("motivation").addEventListener("input", () => {
            $("motVal").textContent = $("motivation").value;
        });

        function renderFactors() {
            const box = $("factorChips");
            box.innerHTML = "";
            
            extraFactors.forEach((f, idx) => {
                const div = document.createElement("div");
                div.className = "chip";
                div.innerHTML = `${escapeHtml(f)} <button type="button">Ã—</button>`;
                div.querySelector("button").onclick = () => {
                    extraFactors.splice(idx, 1);
                    renderFactors();
                };
                box.appendChild(div);
            });
        }

        function addFactor() {
            const inp = $("factorInput");
            const v = (inp.value || "").trim();
            if (!v) return;
            
            extraFactors.push(v);
            inp.value = "";
            renderFactors();
        }

        window.addFactor = addFactor;

        function getCheckedTriggers() {
            return Array.from(document.querySelectorAll('input[name="tr"]:checked'))
                .map(x => x.value);
        }

        function readCOForm() {
            return {
                co_ppm_reading: Number($("co").value),
                age: Number($("age").value),
                daily_cigarette_count: Number($("cigs").value),
                years_smoked: Number($("years").value),
                motivation_level: Number($("motivation").value),
                primary_triggers: getCheckedTriggers(),
                extra_factors: extraFactors,
                symptoms: $("symptoms").value.trim()
            };
        }

        async function pickModelIfNeeded() {
            if (chosenModelName) return chosenModelName;

            if (!GEMINI_API_KEY) {
                throw new Error("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ Gemini API Ø£ÙˆÙ„Ø§Ù‹");
            }

            const url = `https://generativelanguage.googleapis.com/v1beta/models?key=${encodeURIComponent(GEMINI_API_KEY)}`;
            
            try {
                const res = await fetch(url);
                if (!res.ok) {
                    if (res.status === 400) {
                        throw new Error("Ù…ÙØªØ§Ø­ API ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©");
                    }
                    throw new Error(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${res.status}`);
                }

                const data = await res.json();
                const models = data.models || [];

                const supportsGenerate = (m) => 
                    (m.supportedGenerationMethods || []).includes("generateContent");

                const flash = models.find(m => 
                    supportsGenerate(m) && String(m.name).includes("flash")
                );
                const any = models.find(m => supportsGenerate(m));

                const chosen = flash || any;
                if (!chosen) {
                    throw new Error("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…ÙˆØ¯ÙŠÙ„ Ù…ØªØ§Ø­");
                }

                chosenModelName = chosen.name;
                return chosenModelName;
            } catch (error) {
                if (error.message.includes("Failed to fetch")) {
                    throw new Error("ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª");
                }
                throw error;
            }
        }

        async function callGemini(promptText) {
            const modelName = await pickModelIfNeeded();
            const url = `https://generativelanguage.googleapis.com/v1beta/${modelName}:generateContent?key=${encodeURIComponent(GEMINI_API_KEY)}`;

            const body = {
                contents: [{ role: "user", parts: [{ text: promptText }] }],
                generationConfig: { 
                    temperature: 0.7, 
                    maxOutputTokens: 4096
                }
            };

            try {
                const res = await fetch(url, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(body)
                });

                if (!res.ok) {
                    const errorText = await res.text();
                    console.error('API Error:', errorText);
                    
                    if (res.status === 400) {
                        throw new Error("Ù…ÙØªØ§Ø­ API ØºÙŠØ± ØµØ§Ù„Ø­ - Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ Ø¬Ø¯ÙŠØ¯");
                    } else if (res.status === 429) {
                        throw new Error("ØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ - Ø§Ù†ØªØ¸Ø± Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");
                    } else if (res.status === 403) {
                        throw new Error("Ø§Ù„Ù…ÙØªØ§Ø­ ØºÙŠØ± Ù…ÙØ¹Ù‘Ù„ - ØªØ­Ù‚Ù‚ Ù…Ù† Google AI Studio");
                    }
                    throw new Error(`Ø®Ø·Ø£ ${res.status}: ${errorText.substring(0, 100)}`);
                }

                const data = await res.json();
                console.log('API Response:', data);
                
                const text = data?.candidates?.[0]?.content?.parts
                    ?.map(p => p.text)
                    .join("") || "";
                    
                if (!text.trim()) {
                    throw new Error("Ø±Ø¯ ÙØ§Ø±Øº Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ");
                }
                
                console.log('Response text:', text);
                return text;
            } catch (error) {
                if (error.message.includes("Failed to fetch")) {
                    throw new Error("ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ - ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª");
                }
                throw error;
            }
        }

        function buildRumorPrompt(claim) {
            return `You are a health expert. Analyze this health claim in Arabic:

"${claim}"

Return ONLY valid JSON (no markdown, no extra text):
{
  "verdict": "True",
  "risk_level": "Low",
  "explanation_simple": "Ø´Ø±Ø­ ÙˆØ§Ø¶Ø­ ÙˆÙ…Ø®ØªØµØ± Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø¹Ù† ØµØ­Ø© Ø£Ùˆ Ø®Ø·Ø£ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© ÙÙŠ Ø¬Ù…Ù„ØªÙŠÙ† ÙÙ‚Ø·",
  "correction": "Ø§Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø¹Ù„Ù…ÙŠ Ø§Ù„Ø¯Ù‚ÙŠÙ‚ Ù„Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© Ù…Ø¹ Ø°ÙƒØ± Ø§Ù„Ø­Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØµØ­ÙŠØ­Ø©",
  "advice": "Ù†ØµÙŠØ­Ø© Ø·Ø¨ÙŠØ© Ø¢Ù…Ù†Ø© ÙˆØ¹Ù…Ù„ÙŠØ© ÙŠÙ…ÙƒÙ† Ø§ØªØ¨Ø§Ø¹Ù‡Ø§",
  "disclaimer": "ØªÙ†Ø¨ÙŠÙ‡: Ø§Ø³ØªØ´Ø± Ø·Ø¨ÙŠØ¨Ùƒ Ø§Ù„Ù…Ø®ØªØµ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù‚Ø¨Ù„ Ø§ØªØ®Ø§Ø° Ø£ÙŠ Ù‚Ø±Ø§Ø± ØµØ­ÙŠ"
}

Note: verdict can be "True", "False", "Misleading", or "Unclear"
Note: risk_level can be "Low", "Moderate", or "High"`.trim();
        }

        function showError(statusElement, message, details = "") {
            statusElement.className = "status-msg error";
            statusElement.innerHTML = `
                <div>âŒ ${escapeHtml(message)}</div>
                ${details ? `<div class="error-details">${escapeHtml(details)}</div>` : ''}
                <button class="retry-btn" onclick="resetApiKey()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…ÙØªØ§Ø­</button>
            `;
        }

        function renderCOAI(out) {
            $("coResultBox").classList.remove("hidden");

            const riskColors = {
                "Low": "background: linear-gradient(135deg, #11998e, #38ef7d); color: #0a0e27;",
                "Moderate": "background: linear-gradient(135deg, #ff6b6b, #feca57); color: #0a0e27;",
                "High": "background: linear-gradient(135deg, #ff0844, #ff6b6b); color: white;"
            };
            
            const riskBadge = $("coRiskBadge");
            riskBadge.textContent = `Ø§Ù„Ø®Ø·ÙˆØ±Ø©: ${out.risk_level || "â€”"}`;
            riskBadge.setAttribute('style', riskColors[out.risk_level] || "");
            
            $("coVerdictBadge").textContent = `Ø§Ù„Ø­Ø§Ù„Ø©: ${out.verdict_label || "â€”"}`;
            $("coVerdictBadge").setAttribute('style', 'background: linear-gradient(135deg, #00f5a0, #00d9f5); color: #0a0e27;');

            $("coSummary").textContent = out.summary || "";
            $("coInsight").textContent = out.personalized_insights || "";

            const dur = out.recommended_duration_days ?? "â€”";
            const qd = out.quit_day ?? "â€”";
            $("coStrategy").textContent = `Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©: ${dur} ÙŠÙˆÙ… â€¢ ÙŠÙˆÙ… Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹: Ø§Ù„ÙŠÙˆÙ… ${qd}`;

            const plan = $("coPlanGrid");
            plan.innerHTML = "";
            
            (out.taper_plan_weeks || []).forEach(w => {
                const div = document.createElement("div");
                div.className = "dayCard";
                div.innerHTML = `
                    <h4>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ${escapeHtml(w.week)} â€” Ø§Ù„Ù‡Ø¯Ù: ${escapeHtml(w.target_cigarettes_per_day)} Ø³ÙŠØ¬Ø§Ø±Ø©/ÙŠÙˆÙ…</h4>
                    <div>
                        <strong>Ø§Ù„Ø£Ù‡Ø¯Ø§Ù:</strong>
                        <ul>${(w.goals || []).map(g => `<li>${escapeHtml(g)}</li>`).join("")}</ul>
                    </div>
                    <div>
                        <strong>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª:</strong>
                        <ul>${(w.actions || []).map(a => `<li>${escapeHtml(a)}</li>`).join("")}</ul>
                    </div>
                    <p class="tip"><strong>ğŸ’¡ Ù†ØµÙŠØ­Ø©:</strong> ${escapeHtml(w.tip || "")}</p>
                `;
                plan.appendChild(div);
            });

            const tg = $("coTriggerGrid");
            tg.innerHTML = "";
            
            (out.trigger_coping_strategies || []).forEach(t => {
                const div = document.createElement("div");
                div.className = "trCard";
                div.innerHTML = `
                    <p><strong>ğŸ¯ Ø§Ù„Ù…Ø­ÙØ²:</strong> ${escapeHtml(t.trigger)}</p>
                    <p><strong>ğŸ”„ Ø§Ù„Ø¨Ø¯ÙŠÙ„:</strong> ${escapeHtml(t.replacement)}</p>
                    <p><strong>âš¡ Ø¥Ø¬Ø±Ø§Ø¡ Ø³Ø±ÙŠØ¹:</strong> ${escapeHtml(t.quick_action)}</p>
                `;
                tg.appendChild(div);
            });

            $("coRaw").textContent = JSON.stringify(out, null, 2);
        }

        function analyzeCO() {
            $("coStatus").textContent = "";
            $("coStatus").className = "status-msg";
            $("coResultBox").classList.add("hidden");

            const user = readCOForm();
            
            if (user.age < 10 || user.age > 90) {
                $("coStatus").className = "status-msg error";
                $("coStatus").textContent = "âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù…Ø± ØµØ­ÙŠØ­ (10-90)";
                return;
            }

            $("coStatus").className = "status-msg";
            $("coStatus").textContent = "ğŸ”„ Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø­Ø§Ù„ØªÙƒ...";

            setTimeout(() => {
                const cigs = user.daily_cigarette_count;
                const years = user.years_smoked;
                const co = user.co_ppm_reading;
                
                let risk, verdict, summary, insights, duration, quitDay, plan;
                
                // Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø³ÙŠØ·
                if (cigs === 0 && years === 0) {
                    risk = "Low";
                    verdict = "ØºÙŠØ± Ù…Ø¯Ø®Ù†";
                    summary = "Ø±Ø¦ØªØ§Ùƒ ÙÙŠ Ø£ÙØ¶Ù„ Ø­Ø§Ù„Ø§ØªÙ‡Ø§ØŒ ÙˆÙ…Ø¹Ø¯Ù„ Ø¶Ø±Ø¨Ø§Øª Ù‚Ù„Ø¨Ùƒ Ø·Ø¨ÙŠØ¹ÙŠ.";
                    insights = "Ø£Ù†Øª ØªØ¹ÙŠØ´ Ù†Ù…Ø· Ø­ÙŠØ§Ø© ØµØ­ÙŠØŒ Ø­Ø§ÙØ¸ Ø¹Ù„ÙŠÙ‡ ÙˆÙƒÙ† Ù…Ù„Ù‡Ù…Ø§Ù‹ Ù„ØºÙŠØ±Ùƒ.";
                    duration = 0;
                    quitDay = 0;
                    plan = [];
                } else if (co > 25 || (cigs > 20 && years > 10)) {
                    risk = "High";
                    verdict = "Ù…Ø¯Ø®Ù† Ø´Ø±Ù‡ - Ø®Ø·Ø± Ø¹Ø§Ù„ÙŠ";
                    summary = "ØªØ±Ø§ÙƒÙ… Ø§Ù„Ù†ÙŠÙƒÙˆØªÙŠÙ† ÙˆØ§Ù„Ù‚Ø·Ø±Ø§Ù† Ø¹Ø§Ù„ÙŠ Ø¬Ø¯Ø§Ù‹. Ù†Ø³Ø¨Ø© Ø£ÙˆÙ„ Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ† ØªÙ…Ù†Ø¹ ÙˆØµÙˆÙ„ Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ† Ø§Ù„ÙƒØ§ÙÙŠ Ù„Ù„Ø¯Ù…Ø§Øº.";
                    insights = "Ø­Ø§Ù„ØªÙƒ ØªØªØ·Ù„Ø¨ ØªØ¯Ø®Ù„Ø§Ù‹ ÙÙˆØ±ÙŠØ§Ù‹. Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹ Ø¹Ù† Ø§Ù„ØªØ¯Ø®ÙŠÙ† Ø§Ù„Ø¢Ù† Ø³ÙŠØ­Ø³Ù† ØµØ­ØªÙƒ Ø¨Ø´ÙƒÙ„ ÙƒØ¨ÙŠØ±.";
                    duration = 56;
                    quitDay = 42;
                    plan = generateTaperPlan(cigs, 8);
                } else if (cigs > 10 || co > 10) {
                    risk = "Moderate";
                    verdict = "Ù…Ø¯Ø®Ù† Ù…ØªÙˆØ³Ø·";
                    summary = "Ø¨Ø¯Ø¡ ØªØ¶Ø±Ø± Ø§Ù„Ø´Ø¹ÙŠØ±Ø§Øª Ø§Ù„ØªÙ†ÙØ³ÙŠØ©. Ù‚Ø¯ ØªÙ„Ø§Ø­Ø¸ Ø¶ÙŠÙ‚ ØªÙ†ÙØ³ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø¬Ù‡ÙˆØ¯ Ø§Ù„Ø¨Ø¯Ù†ÙŠ Ø§Ù„Ø¨Ø³ÙŠØ·.";
                    insights = "Ø§Ù„ÙˆÙ‚Øª Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¥Ù‚Ù„Ø§Ø¹. ÙƒÙ„Ù…Ø§ Ø¨Ø¯Ø£Øª Ù…Ø¨ÙƒØ±Ø§Ù‹ØŒ ÙƒØ§Ù† Ø§Ù„ØªØ¹Ø§ÙÙŠ Ø£Ø³Ø±Ø¹ ÙˆØ£Ø³Ù‡Ù„.";
                    duration = 42;
                    quitDay = 30;
                    plan = generateTaperPlan(cigs, 6);
                } else {
                    risk = "Low";
                    verdict = "Ù…Ø¯Ø®Ù† Ø®ÙÙŠÙ";
                    summary = "ØªØ£Ø«ÙŠØ±Ø§Øª ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØ© Ø£ÙˆÙ„ÙŠØ© Ø¹Ù„Ù‰ Ø¬Ø¯Ø±Ø§Ù† Ø§Ù„Ø´Ø±Ø§ÙŠÙŠÙ†. Ø§Ù„ØªÙˆÙ‚Ù Ø§Ù„Ø¢Ù† ÙŠØ¶Ù…Ù† Ø¹ÙˆØ¯Ø© Ø§Ù„Ø±Ø¦Ø© Ù„Ø­Ø§Ù„ØªÙ‡Ø§ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© Ø³Ø±ÙŠØ¹Ø§Ù‹.";
                    insights = "Ø£Ù†Øª ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ù…Ø¨ÙƒØ±Ø©. Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹ Ø§Ù„Ø¢Ù† Ø³ÙŠÙƒÙˆÙ† Ø£Ø³Ù‡Ù„ ÙˆØ£Ù‚Ù„ ØªØ­Ø¯ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©.";
                    duration = 21;
                    quitDay = 14;
                    plan = generateTaperPlan(cigs, 3);
                }
                
                const result = {
                    risk_level: risk,
                    verdict_label: verdict,
                    summary: summary,
                    personalized_insights: insights,
                    recommended_duration_days: duration,
                    quit_day: quitDay,
                    taper_plan_weeks: plan,
                    trigger_coping_strategies: generateTriggerStrategies(user.primary_triggers),
                    motivational_message: "Ø±Ø­Ù„Ø© Ø§Ù„Ø£Ù„Ù Ù…ÙŠÙ„ ØªØ¨Ø¯Ø£ Ø¨Ø®Ø·ÙˆØ©. Ù‚Ø±Ø§Ø±Ùƒ Ø¨Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹ Ø§Ù„ÙŠÙˆÙ… Ù‡Ùˆ Ø£ÙØ¶Ù„ Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ ØµØ­ØªÙƒ ÙˆÙ…Ø³ØªÙ‚Ø¨Ù„Ùƒ!",
                    disclaimer: "Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·Ø© Ù„Ù„ØªÙˆØ¹ÙŠØ© Ø§Ù„ØµØ­ÙŠØ© ÙÙ‚Ø·. ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ø§Ù„Ø´Ø¯ÙŠØ¯Ø©ØŒ Ø±Ø§Ø¬Ø¹ Ø·Ø¨ÙŠØ¨Ùƒ ÙÙˆØ±Ø§Ù‹."
                };
                
                renderCOAI(result);
                $("coStatus").className = "status-msg success";
                $("coStatus").textContent = "âœ… ØªÙ… ØªØ­Ù„ÙŠÙ„ Ø­Ø§Ù„ØªÙƒ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®Ø·Ø©!";
            }, 800);
        }
        
        function generateTaperPlan(startCigs, weeks) {
            const plan = [];
            for (let i = 1; i <= weeks; i++) {
                const targetCigs = Math.max(0, Math.floor(startCigs * (1 - (i / (weeks + 1)))));
                plan.push({
                    week: i,
                    target_cigarettes_per_day: targetCigs,
                    goals: [
                        `ØªÙ‚Ù„ÙŠÙ„ Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø¬Ø§Ø¦Ø± Ø¥Ù„Ù‰ ${targetCigs} Ø³ÙŠØ¬Ø§Ø±Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹`,
                        "Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø¬Ø¯ÙˆÙ„ Ø²Ù…Ù†ÙŠ Ù…Ø­Ø¯Ø¯ Ù„Ù„ØªØ¯Ø®ÙŠÙ†"
                    ],
                    actions: [
                        "Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡ Ø¹Ù†Ø¯ Ø§Ù„Ø±ØºØ¨Ø© ÙÙŠ Ø§Ù„ØªØ¯Ø®ÙŠÙ†",
                        "Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ù…Ø´ÙŠ 15 Ø¯Ù‚ÙŠÙ‚Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹",
                        "ØªØ¬Ù†Ø¨ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„ØªÙŠ ØªØ­ÙØ² Ø¹Ù„Ù‰ Ø§Ù„ØªØ¯Ø®ÙŠÙ†"
                    ],
                    tip: i === 1 ? "Ø§Ø¨Ø¯Ø£ Ø¨ØªØ­Ø¯ÙŠØ¯ Ø£ÙˆÙ‚Ø§Øª Ù…Ø¹ÙŠÙ†Ø© Ù„Ù„ØªØ¯Ø®ÙŠÙ† ÙÙ‚Ø·" :
                         i === weeks ? "Ø£Ù†Øª Ù‚Ø±ÙŠØ¨ Ø¬Ø¯Ø§Ù‹ Ù…Ù† Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹ Ø§Ù„ØªØ§Ù… - Ø§Ø³ØªÙ…Ø±!" :
                         `Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ${i}: Ø§Ø³ØªØ¨Ø¯Ù„ Ø³ÙŠØ¬Ø§Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹ Ø¨Ù†Ø´Ø§Ø· ØµØ­ÙŠ`
                });
            }
            return plan;
        }
        
        function generateTriggerStrategies(triggers) {
            const strategies = [];
            const triggerMap = {
                "morning coffee": {
                    trigger: "Ù‚Ù‡ÙˆØ© Ø§Ù„ØµØ¨Ø§Ø­",
                    replacement: "Ø§Ø­ØªØ³Ù Ø§Ù„Ù‚Ù‡ÙˆØ© ÙÙŠ Ù…ÙƒØ§Ù† Ù…Ø®ØªÙ„ÙØŒ Ø£Ùˆ Ø§Ø´Ø±Ø¨ Ø´Ø§ÙŠ Ø£Ø®Ø¶Ø± Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù†Ù‡Ø§",
                    quick_action: "Ø®Ø° Ù†ÙØ³Ø§Ù‹ Ø¹Ù…ÙŠÙ‚Ø§Ù‹ 5 Ù…Ø±Ø§Øª"
                },
                "work stress": {
                    trigger: "Ø¶ØºØ· Ø§Ù„Ø¹Ù…Ù„",
                    replacement: "Ø®Ø° Ø§Ø³ØªØ±Ø§Ø­Ø© Ù‚ØµÙŠØ±Ø© Ù„Ù„Ù…Ø´ÙŠ Ø£Ùˆ ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙ…Ø¯Ø¯",
                    quick_action: "Ø§Ø´Ø±Ø¨ ÙƒÙˆØ¨ Ù…Ø§Ø¡ Ø¨Ø§Ø±Ø¯ ÙˆØ§Ø¨ØªØ¹Ø¯ Ø¹Ù† Ù…ÙƒØªØ¨Ùƒ Ù„Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ†"
                },
                "after meals": {
                    trigger: "Ø¨Ø¹Ø¯ Ø§Ù„Ø£ÙƒÙ„",
                    replacement: "Ø§ØºØ³Ù„ Ø£Ø³Ù†Ø§Ù†Ùƒ Ù…Ø¨Ø§Ø´Ø±Ø© Ø£Ùˆ Ø§Ù…Ø¶Øº Ø¹Ù„ÙƒØ© Ø®Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ø³ÙƒØ±",
                    quick_action: "Ù‚Ù… Ø¨Ù†Ø²Ù‡Ø© Ù‚ØµÙŠØ±Ø© Ù„Ù…Ø¯Ø© 5 Ø¯Ù‚Ø§Ø¦Ù‚"
                },
                "friends": {
                    trigger: "Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡",
                    replacement: "Ø§Ø·Ù„Ø¨ Ù…Ø´Ø±ÙˆØ¨Ø§Ù‹ Ø£Ùˆ ÙˆØ¬Ø¨Ø© Ø®ÙÙŠÙØ© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø³ÙŠØ¬Ø§Ø±Ø©",
                    quick_action: "Ø£Ø®Ø¨Ø± Ø£ØµØ¯Ù‚Ø§Ø¡Ùƒ Ø¨Ù‚Ø±Ø§Ø±Ùƒ ÙˆØ§Ø·Ù„Ø¨ Ø¯Ø¹Ù…Ù‡Ù…"
                }
            };
            
            triggers.forEach(t => {
                if (triggerMap[t]) {
                    strategies.push(triggerMap[t]);
                }
            });
            
            if (strategies.length === 0) {
                strategies.push({
                    trigger: "Ø§Ù„Ø±ØºØ¨Ø© Ø§Ù„Ø¹Ø§Ù…Ø© ÙÙŠ Ø§Ù„ØªØ¯Ø®ÙŠÙ†",
                    replacement: "Ø§Ø´Ø±Ø¨ Ù…Ø§Ø¡ØŒ ØªÙ†ÙØ³ Ø¹Ù…ÙŠÙ‚Ø§Ù‹ØŒ Ø£Ùˆ Ù…Ø§Ø±Ø³ Ù†Ø´Ø§Ø·Ø§Ù‹ Ø¨Ø¯Ù†ÙŠØ§Ù‹ Ø®ÙÙŠÙØ§Ù‹",
                    quick_action: "Ø§Ù†ØªØ¸Ø± 5 Ø¯Ù‚Ø§Ø¦Ù‚ - Ø§Ù„Ø±ØºØ¨Ø© Ø³ØªØ®ØªÙÙŠ"
                });
            }
            
            return strategies;
        }

        window.analyzeCO = analyzeCO;

        function renderRumorAI(out) {
            $("rumorResultBox").classList.remove("hidden");
            
            const verdictColors = {
                "True": "background: linear-gradient(135deg, #11998e, #38ef7d); color: #0a0e27;",
                "False": "background: linear-gradient(135deg, #ff0844, #ff6b6b); color: white;",
                "Misleading": "background: linear-gradient(135deg, #ff6b6b, #feca57); color: #0a0e27;",
                "Unclear": "background: linear-gradient(135deg, #00d9f5, #a960ee); color: white;"
            };
            
            const verdictBadge = $("rumorVerdict");
            verdictBadge.textContent = `Ø§Ù„Ø­ÙƒÙ…: ${out.verdict || "â€”"}`;
            verdictBadge.setAttribute('style', verdictColors[out.verdict] || "");
            
            const riskColors = {
                "Low": "background: linear-gradient(135deg, #11998e, #38ef7d); color: #0a0e27;",
                "Moderate": "background: linear-gradient(135deg, #ff6b6b, #feca57); color: #0a0e27;",
                "High": "background: linear-gradient(135deg, #ff0844, #ff6b6b); color: white;"
            };
            
            const riskBadge = $("rumorRisk");
            riskBadge.textContent = `Ø§Ù„Ø®Ø·Ø±: ${out.risk_level || "â€”"}`;
            riskBadge.setAttribute('style', riskColors[out.risk_level] || "");
            
            $("rumorExplanation").textContent = out.explanation_simple || "";
            $("rumorCorrection").textContent = out.correction || "";
            $("rumorAdvice").textContent = out.advice || "";
            
            $("rumorRaw").textContent = JSON.stringify(out, null, 2);
        }

        async function checkRumor() {
            if (!checkApiKey()) return;
            
            $("rumorStatus").textContent = "";
            $("rumorStatus").className = "status-msg";
            $("rumorResultBox").classList.add("hidden");

            const claim = $("rumorText").value.trim();
            
            if (!claim) {
                showError($("rumorStatus"), "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© Ø£ÙˆÙ„Ø§Ù‹");
                return;
            }

            $("rumorStatus").className = "status-msg";
            $("rumorStatus").textContent = "ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø©...";
            
            try {
                const prompt = buildRumorPrompt(claim);
                const text = await callGemini(prompt);
                const out = safeParseJSON(text);
                
                renderRumorAI(out);
                $("rumorStatus").className = "status-msg success";
                $("rumorStatus").textContent = "âœ… ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ù†Ø¬Ø§Ø­!";
            } catch (e) {
                let errorMsg = "Ø­Ø¯Ø« Ø®Ø·Ø£";
                let errorDetails = "";

                if (e.message.includes("Ù…ÙØªØ§Ø­ API")) {
                    errorMsg = "Ù…ÙØªØ§Ø­ API ØºÙŠØ± ØµØ§Ù„Ø­";
                    errorDetails = "Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Google AI Studio";
                } else if (e.message.includes("Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª")) {
                    errorMsg = "ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª";
                    errorDetails = "ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª";
                } else {
                    errorMsg = e.message;
                }

                showError($("rumorStatus"), errorMsg, errorDetails);
                
                if (e.message.includes("Ù…ÙØªØ§Ø­")) {
                    GEMINI_API_KEY = null;
                    localStorage.removeItem('gemini_api_key');
                    chosenModelName = null;
                }
            }
        }

        window.checkRumor = checkRumor;

        document.addEventListener('DOMContentLoaded', () => {
            showSection("homeSection");
            
            if (!GEMINI_API_KEY) {
                console.log("âš ï¸ Ù„Ù… ÙŠØªÙ… ØªÙƒÙˆÙŠÙ† Ù…ÙØªØ§Ø­ API");
            }
        });
    </script>
</body>
</html>
